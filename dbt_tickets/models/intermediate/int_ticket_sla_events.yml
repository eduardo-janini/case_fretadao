version: 2

models:
  - name: int_ticket_sla_events
    description: "Eventos SLA dos tickets extraídos da API, normalizados e tipados (staging layer)"
    columns:
      - name: sla_event_id
        description: "Identificador único do evento SLA do ticket"
        tests:
          - not_null
          - unique
      - name: ticket_id
        description: "ID do ticket associado ao evento SLA"
        tests:
          - not_null

      - name: event_time
        description: "Data quando o evento SLA ocorreu"
        tests :
          - not_null
        
      - name: metric
        description: "Métrica associada ao evento SLA"
        tests :
          - not_null
          - accepted_values:
              values: ['reply_time', 'requester_wait_time']
      - name: event_type
        description: "Se o SLA está sendo cumprido ou violado"
        tests :
          - not_null
          - accepted_values:
              values: ['fulfill', 'breach']
              
      - name: sla_policy_id
        description: "ID da política de SLA"
        tests :
          - not_null
          - accepted_values:
              values: [1, 2, 3, 4]
      - name: sla_policy_title
        description: "Título da política de SLA"
        tests :
          - not_null